(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[251],{44221:function(e,n,t){"use strict";t.d(n,{c:function(){return _}});var i=t(22710),r=t(62230),o=t(85244),s=t(81541),c=t(22970),a=t(52322),l=t(75289),d=t(2784),u=t(36131),m=t(5632),f=t(607),p=t(68780),x=t(88932),h=t(38876),v=t(40147),y=t(82770),C=t(13858);function j(){return(j=(0,i.Z)(function(e){var n,t,i,r,o,s,a;return(0,c.__generator)(this,function(c){switch(c.label){case 0:var l;return c.trys.push([0,3,,4]),n=e.sliceName,t=e.libraryName,i=e.onSuccess,l=n,r={id:(0,h.T3)(l),type:"SharedSlice",name:l,description:l,variations:[{id:b,name:(0,h.MP)(b),docURL:"...",version:"initial",description:(0,h.MP)(b),imageUrl:""},]},[4,v.j.slices.createSlice({libraryID:t,model:r})];case 1:if((o=c.sent().errors).length>0)throw o;return y.Xe.track({event:"slice:created",id:(0,h.MP)(n),name:n,library:t}),[4,i(r)];case 2:return c.sent(),x.Am.success((0,C.kQ)({path:"".concat(t,"/").concat(r.name,"/model.json")})),[3,4];case 3:return s=c.sent(),a="Internal Error: Slice not created",console.error(a,s),x.Am.error(a),[3,4];case 4:return[2]}})})).apply(this,arguments)}var b="default",S=t(90374),g=t(78656),Z=t(66443),T=t(70041),k={getBuilderPagePathname:function(e){var n=e.libraryName,t=e.sliceName,i=e.variationId;return"/".concat(n.replace(/\//g,"--"),"/").concat(t,"/").concat(i)}},_=function(e){var n,t=e.onClose,x=e.localLibraries,h=e.remoteSlices,C=e.customType,b=e.tabId,_=(0,m.useRouter)(),w=(0,S.Z)(),I=w.createSliceSuccess,N=w.saveCustomTypeSuccess,E=(0,d.useState)(!1),L=E[0],M=E[1],P=(n=(0,i.Z)(function(e){var n,t;return(0,c.__generator)(this,function(a){switch(a.label){case 0:var l;return n=e.sliceName,t=e.from,M(!0),[4,function(e){return j.apply(this,arguments)}({sliceName:n,libraryName:t,onSuccess:(l=(0,i.Z)(function(e){var i,a,l,d;return(0,c.__generator)(this,function(i){switch(i.label){case 0:return[4,(0,y.y0)()];case 1:if(I(i.sent().libraries),!C)return[3,3];return a=(0,o.Z)((0,r.Z)({},C),{tabs:C.tabs.map(function(n){return n.key===b&&n.sliceZone?(0,o.Z)((0,r.Z)({},n),{sliceZone:{key:n.sliceZone.key,value:(0,s.Z)(n.sliceZone.value).concat([{key:e.id,value:e},])}}):n})}),[4,v.j.customTypes.updateCustomType({model:f.Dc.fromSM(a)})];case 2:i.sent(),N(f.Dc.fromSM(a)),i.label=3;case 3:return l=e.variations[0].id,d=k.getBuilderPagePathname({libraryName:t,sliceName:n,variationId:l}),_.push(d),[2]}})}),function(e){return l.apply(this,arguments)})})];case 1:return a.sent(),[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.jsx)(p.Z,{dataCy:"create-slice-modal",isOpen:!0,widthInPx:"530px",isLoading:L,formId:"create-new-slice",close:t,buttonLabel:"Create",onSubmit:function(e){P(e)},initialValues:{sliceName:"",from:x[0].name},validate:function(e){return(0,Z.h)(e,x,h)},content:{title:"Create a new slice"},actionMessage:C?g.$[C.format].createSliceFromTypeActionMessage:void 0,children:function(e){var n=e.touched,t=e.values,i=e.setFieldValue,s=e.errors;return(0,a.jsxs)(l.xu,{children:[(0,a.jsx)(T.W,{name:"sliceName",label:"Slice Name",placeholder:"Pascalised Slice API ID (e.g. TextBlock)",error:n.sliceName?s.sliceName:void 0,dataCy:"slice-name-input"}),(0,a.jsx)(l.__,{htmlFor:"from",sx:{mb:2},children:"Target Library"}),(0,a.jsx)(u.ZP,{name:"from",options:x.map(function(e){return{value:e.name,label:e.name}}),onChange:function(e){return e?void i("from",e.value):null},defaultValue:{value:t.from,label:t.from},styles:{option:function(e){return(0,o.Z)((0,r.Z)({},e),{color:"#161618"})}},theme:function(e){return(0,o.Z)((0,r.Z)({},e),{colors:(0,o.Z)((0,r.Z)({},e.colors),{primary:"#E9E8EA"})})},menuPortalTarget:document.body})]})}})}},66443:function(e,n,t){"use strict";t.d(n,{h:function(){return l}});var i=t(81541),r=t(75329),o=t(96009),s=t.n(o),c=t(74600),a=t.n(c);function l(e,n,t){var o=e.sliceName;if(!o)return{sliceName:"Cannot be empty"};if(!r.xo.exec(o))return{sliceName:"No special characters allowed"};if(a()(s()(o)).replace(/\s/gm,"")!==o.trim())return{sliceName:"Value has to be PascalCased"};if(o.match(/^\d/))return{sliceName:"Value cannot start with a number"};if(r.lS.includes(o))return{sliceName:"".concat(o," is reserved for Slice Machine use")};var c=n.flatMap(function(e){return e.components.map(function(e){return e.model.name})}),l=t.map(function(e){return e.name});if((0,i.Z)(c).concat((0,i.Z)(l)).includes(o))return{sliceName:"Slice name is already taken."}}},53251:function(e,n,t){"use strict";t.d(n,{H:function(){return eq}});var i,r,o,s=t(52322),c=t(58738),a=t(97729),l=t.n(a),d=t(5632),u=t(2784),m=t(56580),f=t(65077),p=t(75289),x=t(13394),h=t(12530),v=t(47560),y=t(38876),C=t(8482),j=[x.UID,x.Group,x.StructuredText,x.Image,x.Link,x.LinkToMedia,x.ContentRelationship,x.Select,x.Boolean,x.Date,x.Timestamp,x.Embed,x.Number,x.GeoPoint,x.Color,x.Text,],b=t(62230),S=t(85244),g=t(81541),Z=t(44221),T=t(75992),k=t(71685),_=t(2754),w=function(e){var n=e.onCreateNewSlice,t=e.onAddNewSlice,i=e.projectHasAvailableSlices;return(0,s.jsx)(c.xu,{justifyContent:"center",children:(0,s.jsx)(_.R$,{backgroundImage:"/blank-slate-slice-zone.png",children:(0,s.jsxs)(_.T9,{children:[(0,s.jsx)(_._T,{children:"Add your Slices"}),(0,s.jsx)(_.nf,{children:"Slices are website sections that you can reuse on different pages with different content. Each Slice has its own component in your code."}),(0,s.jsxs)(_.Qj,{children:[(0,s.jsx)(c.zx,{startIcon:(0,s.jsx)(c.I5,{name:"add"}),onClick:n,children:"New slice"}),i&&(0,s.jsx)(c.zx,{startIcon:(0,s.jsx)(c.I5,{name:"edit"}),onClick:t,children:"Update Slices"})]})]})})})},I=t(56577),N=t(54132),E=t(25812),L=function(e){var n=e.isDeleteSliceZoneModalOpen,t=e.deleteSliceZone,i=e.closeDeleteSliceZoneModal;return(0,s.jsx)(E.Z,{isOpen:n,shouldCloseOnOverlayClick:!0,style:{content:{maxWidth:612}},onRequestClose:i,children:(0,s.jsx)(N.Z,{bodySx:{p:0,bg:"white",position:"relative",height:"100%",padding:16},footerSx:{position:"sticky",bottom:0,p:0},sx:{border:"none",overflow:"hidden"},borderFooter:!0,Header:function(){return(0,s.jsxs)(p.kC,{sx:{position:"sticky",top:0,zIndex:1,p:"16px",alignItems:"center",justifyContent:"space-between",borderBottom:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))}},children:[(0,s.jsx)(p.X6,{sx:{fontSize:"14px",fontWeight:"bold",ml:1},children:"Do you really want to delete Slice Zone?"}),(0,s.jsx)(p.x8,{type:"button",onClick:i})]})},Footer:function(){return(0,s.jsxs)(p.kC,{sx:{justifyContent:"flex-end",height:64,alignItems:"center",paddingRight:16,borderTop:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.darkBorders))},backgroundColor:"gray"},children:[(0,s.jsx)(I.z,{label:"Cancel",variant:"secondary",onClick:i,sx:{mr:"10px",fontWeight:"bold",color:"grey12",borderRadius:6}}),(0,s.jsx)(I.z,{label:"Delete",variant:"danger",onClick:t,sx:{minHeight:39,minWidth:78}})]})},children:(0,s.jsx)(p.nv,{children:"You're about to delete Slice Zone."})})})},M=t(95564),P=t(68780),D=t(63397),F=t(15996),A=t(59469),z=function(e){var n=e.availableSlices,t=e.values;return(0,s.jsx)(D.F2,{name:"sliceKeys",render:function(e){return(0,s.jsx)(A.Z,{gridTemplateMinPx:"200px",elems:n,defineElementKey:function(e){return e.model.name},renderElem:function(n){return F.M.render({slice:n,Wrapper:function(n){var i=n.slice,r=n.children,o=n.sx;return(0,s.jsx)(p.xu,{"data-testid":"slicezone-modal-item",onClick:function(){if(t.sliceKeys.includes(i.model.id))return e.remove(t.sliceKeys.indexOf(i.model.id));e.push(i.model.id)},sx:(0,b.Z)({cursor:"pointer"},o),children:r},"".concat(i.from,"-").concat(i.model.name))},StatusOrCustom:function(e){var n=e.slice,i=t.sliceKeys.includes(n.model.id);return(0,s.jsx)(p.XZ,{value:i?"true":"false",defaultChecked:i,sx:{mr:0},"data-cy":"check-".concat(n.model.id)})}})}})}})},O=function(e){var n=e.isOpen,t=e.formId,i=e.close,r=e.onSubmit,o=e.availableSlices,c=e.slicesInSliceZone;return(0,s.jsx)(P.Z,{buttonLabel:"Apply",isOpen:n,formId:t,close:i,onSubmit:function(e){r(e),i()},initialValues:{sliceKeys:c.map(function(e){return e.model.id})},content:{title:"Update Slices"},dataCy:"update-slices-modal",children:function(e){var n=e.values;return(0,s.jsx)(z,{values:n,availableSlices:o})}})},V=t(90374),R=t(57282),H=t(78656),B=function(e){var n=e.slices,t=e.modelsStatuses,i=e.authStatus,r=e.isOnline,o=e.format,c=n.some(function(e){return"SharedSlice"!==e.type}),a=H.$[o],l=(0,V.Z)().openToaster;return(0,u.useEffect)(function(){c&&l("This ".concat(a.name({start:!1,plural:!1})," contains Slices that are incompatible."),R.Jf.WARNING)},[c]),(0,s.jsx)(A.Z,{elems:n,defineElementKey:function(e){return"Slice"===e.type?e.payload.key:e.payload.model.name},renderElem:function(e){return"Slice"===e.type?F.X.render({slice:e.payload}):F.M.render({slice:e.payload,StatusOrCustom:{status:t.slices[e.payload.model.id],authStatus:i,isOnline:r}})}})},U=function(e,n){var t,i=(n||[]).reduce(function(e,n){return(0,g.Z)(e).concat((0,g.Z)(n.components))},[]),r=e.value.reduce(function(e,n){var t=n.key,r=n.value;if("SharedSlice"===r.type){var o=i.find(function(e){return e.model.id===t});return o?(0,S.Z)((0,b.Z)({},e),{slicesInSliceZone:(0,g.Z)(e.slicesInSliceZone).concat([{type:"SharedSlice",payload:o},])}):(0,S.Z)((0,b.Z)({},e),{notFound:(0,g.Z)(e.notFound).concat([{key:t}])})}return"Slice"===r.type?(0,S.Z)((0,b.Z)({},e),{slicesInSliceZone:(0,g.Z)(e.slicesInSliceZone).concat([{type:"Slice",payload:{key:t,value:r}},])}):e},{slicesInSliceZone:[],notFound:[]});return{availableSlices:i,slicesInSliceZone:r.slicesInSliceZone,notFound:r.notFound}},X=function(e){var n=e.customType,t=e.onCreateSliceZone,i=e.onDeleteSliceZone,r=e.onRemoveSharedSlice,o=e.onSelectSharedSlices,a=e.sliceZone,l=e.tabId,d=(0,u.useState)(!1),f=d[0],x=d[1],h=(0,u.useState)(!1),v=h[0],y=h[1],C=(0,m.v9)(function(e){return{remoteSlices:(0,T.sT)(e),libraries:(0,T.Sd)(e),slices:(0,T.xC)(e)}}),j=C.remoteSlices,b=C.libraries,S=C.slices,g=b.filter(function(e){return e.isLocal}),_=(0,k.J)({slices:S}),I=_.modelsStatuses,N=_.authStatus,E=_.isOnline,P=(0,u.useMemo)(function(){return a?U(a,b):{availableSlices:[],slicesInSliceZone:[],notFound:[]}},[a,b]),D=P.availableSlices,F=P.slicesInSliceZone,A=P.notFound,z=(0,u.useState)(!1),V=z[0],R=z[1];(0,u.useEffect)(function(){(null==A?void 0:A.length)&&A.forEach(function(e){r(e.key)})},[A]);var H=F.filter(function(e){return"SharedSlice"===e.type}).map(function(e){return e.payload}),X=F.filter(function(e){return"Slice"===e.type}).map(function(e){return e.payload.key}),K=function(){a||t(),x(!0)},q=function(){a||t(),y(!0)};return(0,s.jsxs)(p.xu,{mt:3,children:[(0,s.jsx)(M.Z,{Heading:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(p.X6,{as:"h6",style:{marginRight:c.gR.size[8]},children:"Slice Zone"}),(0,s.jsx)(c.rs,{checked:!!a,onCheckedChange:function(e){e?t():R(!0)}})]}),Actions:(0,s.jsxs)(p.kC,{sx:{alignItems:"center"},children:[a?(0,s.jsxs)(p.xv,{pr:3,sx:{fontSize:"14px"},children:["data.",a.key]}):null,(0,s.jsxs)(p.kC,{sx:{gap:"8px"},children:[(0,s.jsx)(c.zx,{variant:"secondary",startIcon:(0,s.jsx)(c.I5,{name:"add"}),onClick:q,children:"New slice"}),D.length>0&&(0,s.jsx)(c.zx,{variant:"secondary",startIcon:(0,s.jsx)(c.I5,{name:"edit"}),onClick:K,"data-cy":"update-slices",children:"Update Slices"})]})]})}),a&&!F.length?(0,s.jsx)(w,{onAddNewSlice:K,onCreateNewSlice:q,projectHasAvailableSlices:D.length>0}):(0,s.jsx)(B,{slices:F,modelsStatuses:I,authStatus:N,isOnline:E,format:n.format}),(0,s.jsx)(O,{isOpen:f,formId:"tab-slicezone-form-".concat(l),availableSlices:D,slicesInSliceZone:H,onSubmit:function(e){return o(e.sliceKeys,X)},close:function(){return x(!1)}}),(0,s.jsx)(L,{isDeleteSliceZoneModalOpen:V,closeDeleteSliceZoneModal:function(){R(!1)},deleteSliceZone:function(){i(),R(!1)}}),(null==g?void 0:g.length)!==0&&v&&(0,s.jsx)(Z.c,{onClose:function(){y(!1)},localLibraries:g,remoteSlices:j,customType:n,tabId:l})]})},K=t(43904),q=t(82770),W=function(e){var n=e.customType,t=e.tabId,i=e.fields,r=e.sliceZone,o=(0,V.Z)(),c=o.deleteCustomTypeField,a=o.addCustomTypeField,l=o.reorderCustomTypeField,d=o.replaceCustomTypeField,u=o.createSliceZone,f=o.deleteSliceZone,p=o.deleteCustomTypeSharedSlice,b=o.replaceCustomTypeSharedSlice,S=(0,m.v9)(function(e){return{poolOfFields:(0,K.h2)(e)}}).poolOfFields;if(!S)return null;var g=function(e){c(t,e)},Z=function(e){var i=e.id,r=e.label,o=e.widgetTypeName;if(!(0,v.Ss)(x,o)){var s=x[o];q.Xe.track({event:"custom-type:field-added",id:i,name:n.id,type:s.TYPE_NAME,zone:"static"}),a(t,i,s.create(r))}},T=function(e){!(0,v.uS)(e)&&l(t,e.source.index,e.destination.index)},k=function(e){var n=e.apiId,i=e.newKey,r=e.value;!(0,v.Ss)(x,r.type)&&d(t,n,i,r)},_=function(){u(t)},w=function(){f(t)},I=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];q.Xe.track({event:"custom-type:slice-zone-updated",customTypeId:n.id}),b(t,e,i)},N=function(e){p(t,e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{zoneType:"customType",tabId:t,title:"Static Zone",dataTip:"",fields:i,poolOfFieldsToCheck:S,showHints:!0,EditModal:h.Z,widgetsArray:j,onDeleteItem:g,onSave:k,onSaveNewField:Z,onDragEnd:T,renderHintBase:function(e){var n=e.item;return"data".concat((0,y.Ti)(n.key))},renderFieldAccessor:function(e){return"data".concat((0,y.Ti)(e))},dataCy:"ct-static-zone",isRepeatableCustomType:n.repeatable}),(0,s.jsx)(X,{customType:n,tabId:t,sliceZone:r,onRemoveSharedSlice:N,onCreateSliceZone:_,onDeleteSliceZone:w,onSelectSharedSlices:I})]})},G=t(951),J=t(59326),Q=t(92928),Y=t(52742),$=t(86847),ee=function(e){var n=e.name,t=e.label,i=e.placeholder,r=e.error;return(0,s.jsxs)(p.xu,{mb:3,children:[(0,s.jsx)(p.__,{htmlFor:n,mb:2,children:t}),(0,s.jsx)(D.gN,{name:n,type:"text",placeholder:i,as:p.II,autoComplete:"off"}),r?(0,s.jsx)(p.xv,{sx:{color:"error",mt:1},children:r}):null]})},en=function(e){var n=e.title,t=e.isOpen,i=e.onSubmit,r=e.close,o=e.tabIds;return(0,s.jsx)(P.Z,{isOpen:t,widthInPx:"530px",formId:"create-tab",close:r,onSubmit:function(e){i(e),r()},initialValues:{id:""},validate:function(e){var n=e.id;return n?o.includes(n.toLowerCase())?{id:"Tab exists already"}:void 0:{id:"Tab ID is required"}},content:{title:n},children:function(e){var n=e.errors;return(0,s.jsx)(p.xu,{children:(0,s.jsx)(ee,{name:"id",label:"New Tab ID",placeholder:"A label for selecting the tab (i.e. not used in the API)",error:n.id})})}})},et=t(98240);(o=i||(i={})).UPDATE="update",o.DELETE="delete";var ei,er=function(e){var n=e.name,t=e.label,i=e.placeholder,r=e.error,o=(0,et.Z)(e,["name","label","placeholder","error"]);return(0,s.jsxs)(p.xu,{mb:3,children:[(0,s.jsx)(p.__,{htmlFor:n,mb:2,children:t}),(0,s.jsx)(D.gN,(0,b.Z)({name:n,type:"text",placeholder:i,as:p.II,autoComplete:"off"},o)),r?(0,s.jsx)(p.xv,{sx:{color:"error",mt:1},children:r}):null]})},eo=function(e){var n=e.title,t=e.isOpen,r=e.onSubmit,o=e.close,c=e.tabIds,a=e.allowDelete;return(0,s.jsx)(P.Z,{omitFooter:!0,isOpen:t,widthInPx:"530px",formId:"create-tab",close:o,cardProps:{bodySx:{p:0}},onSubmit:function(e){r(e),o()},initialValues:{id:"",actionType:null},validate:function(e){var n=e.id;return n?c.includes(n.toLowerCase())?{id:"Tab exists already"}:void 0:{id:"Tab ID is required"}},content:{title:n},children:function(e){var n=e.errors,t=e.values,c=e.setFieldValue,l=e.isValid;return(0,s.jsxs)(p.xu,{children:[(0,s.jsxs)(p.xu,{sx:{px:4,py:4},children:[(0,s.jsx)(er,{name:"id",label:"Update Tab ID",placeholder:"A label for selecting the tab (i.e. not used in the API)",error:n.id,onBlur:function(e){t.id!==e.target.value&&c("id",e.target.value.trim())},onChange:function(e){c("id",e.target.value)}}),(0,s.jsx)(p.zx,{type:"button",sx:{mt:3,width:"100%"},disabled:!l,onClick:function(){t.id&&t.id.length&&r({id:t.id.trim(),actionType:i.UPDATE}),o()},children:"Save"})]}),(0,s.jsx)(p.xu,{as:"hr",sx:{borderBottom:"none",borderTop:function(e){var n;return"1px solid ".concat(null==e?void 0:null===(n=e.colors)||void 0===n?void 0:n.borders)}}}),a&&(0,s.jsxs)(p.xu,{sx:{px:4,py:4},children:[(0,s.jsx)(p.X6,{as:"h4",children:"Delete this tab?"}),(0,s.jsx)(p.xv,{as:"p",color:"textClear",sx:{mt:2},children:"This action cannot be undone."}),(0,s.jsx)(p.zx,{type:"button",variant:"buttons.actionDelete",sx:{mt:3},onClick:function(){r({id:t.id,actionType:i.DELETE}),o()},children:"Yes, delete tab"})]})]})}})},es=t(39031);(ei=r||(r={})).CREATE="create",ei.UPDATE="update";var ec=function(e){var n,t=e.theme,i=e.onClick;return(0,s.jsx)(es.Z,{size:20,Icon:Y.XlX,label:"Edit tab",sx:{cursor:"pointer",color:null===(n=t.colors)||void 0===n?void 0:n.icons},onClick:i})},ea=function(e){var n=e.tabs,t=e.renderTab,o=(0,J.B7)().theme,c=(0,V.Z)(),a=c.createCustomTypeTab,l=c.updateCustomTypeTab,d=c.deleteCustomTypeTab,m=(0,u.useState)(0),f=m[0],x=m[1],h=(0,u.useState)(),v=h[0],y=h[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Q.mQ,{selectedIndex:f,onSelect:function(e){return x(e)},children:[(0,s.jsxs)($.t,{children:[n.map(function(e,t){return(0,s.jsx)($.o,{style:{display:"flex",height:"48px"},children:(0,s.jsxs)(p.kC,{sx:{alignItems:"center"},children:[e.key,"\xa0",t===f?(0,s.jsx)(ec,{theme:o,onClick:function(t){t.preventDefault(),y({title:"Edit Tab",type:r.UPDATE,key:e.key,allowDelete:n.length>1})}}):null]})},e.key)}),(0,s.jsx)($.o,{style:{height:"48px"},disabled:!0,onClick:function(){return y({title:"Add Tab",type:r.CREATE})},children:(0,s.jsxs)(p.zx,{variant:"transparent",sx:{m:0,color:"text"},children:[(0,s.jsx)(G.Lfi,{style:{position:"relative",top:"2px"}})," Add Tab"]})},"new-tab")]}),n.map(function(e){return(0,s.jsx)(Q.x4,{children:t(e)},e.key)}),(0,s.jsx)(Q.x4,{},"new-tab")]}),(null==v?void 0:v.type)===r.CREATE?(0,s.jsx)(en,(0,S.Z)((0,b.Z)({},v),{isOpen:!0,tabIds:n.map(function(e){return e.key.toLowerCase()}),close:function(){return y(void 0)},onSubmit:function(e){a(e.id),x(n.length)}})):null,(null==v?void 0:v.type)===r.UPDATE?(0,s.jsx)(eo,(0,S.Z)((0,b.Z)({},v),{isOpen:!0,tabIds:n.filter(function(e){return e.key!==v.key}).map(function(e){return e.key.toLowerCase()}),close:function(){return y(void 0)},onSubmit:function(e){var n=e.id,t=e.actionType;t===i.UPDATE&&l(v.key,n),t===i.DELETE&&(d(v.key),x(0))}})):null]})},el=function(e){var n=e.customType;return(0,s.jsx)(ea,{tabs:n.tabs,renderTab:function(e){var t=e.value,i=e.sliceZone,r=e.key;return(0,s.jsx)(p.xu,{sx:{mt:4},children:(0,s.jsx)(W,{fields:t,sliceZone:i,tabId:r,customType:n})})}})},ed=t(607),eu=t(7819),em=t(32038),ef=t(67445),ep=t(49471),ex=t(32665),eh=t(3098),ev=t(19345),ey=t(9975);t(48513);var eC=function(e){var n=e.tabs,t=(0,et.Z)(e,["tabs"]);return(0,s.jsxs)(ey.fC,(0,S.Z)((0,b.Z)({},t),{className:"_1ecs97d7vk _1ecs97d7vm _1ecs97d7vv _1ecs97dm _1ecs97d7z _1ecs97d82p",defaultValue:n[0].label,orientation:"vertical",children:[(0,s.jsx)(ey.aV,{className:"_1ecs97d7vk _1ecs97d7vm _1ecs97d7vw _1ecs97d31e _1ecs97d38r _1ecs97d7ym _1ecs97d7yy _1ecs97d8aa","aria-label":"content tabs",children:n.map(function(e,n){var t=e.label;return(0,s.jsx)(ey.xz,{className:"_76k20u4 _1ecs97d7vk _1ecs97d7vm _1ecs97d7vv _1ecs97d53y _1ecs97d5bb _1ecs97d807 _1ecs97d89t",value:t,children:(0,s.jsx)(c.xv,{className:"_76k20u5",component:"span",color:"inherit",children:t})},"".concat(t,"-trig").concat(n+1))})}),n.map(function(e,n){var t=e.label,i=e.content;return(0,s.jsx)(ey.VY,{className:"_76k20u6 _1ecs97d7vk _1ecs97d7vm _1ecs97d7vv _1ecs97d82p _1ecs97d7z5",value:t,children:(0,s.jsx)(c.xr,{className:"_1ecs97d87y",children:i})},"".concat(t,"-content").concat(n+1))})]}))},ej=t(88241),eb=t(70863),eS=t(8857),eg=t(49109),eZ=t(72757),eT=t(25145),ek=function(){return(0,s.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1707 19.1237C17.9629 19.3056 17.9419 19.6214 18.1237 19.8293C18.3056 20.0371 18.6214 20.0581 18.8293 19.8763L22.8293 16.3763C22.9378 16.2814 23 16.1442 23 16C23 15.8558 22.9378 15.7187 22.8293 15.6237L18.8293 12.1237C18.6214 11.9419 18.3056 11.9629 18.1237 12.1708C17.9419 12.3786 17.9629 12.6945 18.1707 12.8763L21.7407 16L18.1707 19.1237ZM13.8293 12.8763C14.0371 12.6945 14.0581 12.3786 13.8763 12.1708C13.6944 11.9629 13.3786 11.9419 13.1707 12.1237L9.17075 15.6237C9.06224 15.7187 9 15.8558 9 16C9 16.1442 9.06224 16.2814 9.17075 16.3763L13.1707 19.8763C13.3786 20.0581 13.6944 20.0371 13.8763 19.8293C14.0581 19.6214 14.0371 19.3056 13.8293 19.1237L10.2593 16L13.8293 12.8763Z",fill:"#6F6E77"})})},e_=function(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:(0,s.jsx)("path",{d:"M21.2388 10H10.7623C10.3415 10 10 10.3415 10 10.7623V21.2377C10 21.6585 10.3415 22 10.7623 22H21.2377C21.6585 22 22 21.6585 22 21.2388V10.7623C22 10.3415 21.6585 10 21.2388 10ZM16.5714 19.1953C16.5714 20.3371 15.9018 20.8571 14.9241 20.8571C14.0402 20.8571 13.4029 20.2645 13.1429 19.7143L14.0413 19.1708C14.2143 19.4777 14.4777 19.7143 14.8571 19.7143C15.2199 19.7143 15.4286 19.5725 15.4286 19.0212V15.4286H16.5714V19.1953ZM19.0502 20.8571C18.0379 20.8571 17.4632 20.3471 17.1429 19.7143L18 19.1429C18.2333 19.5246 18.4877 19.8895 19.0257 19.8895C19.4777 19.8895 19.7143 19.6641 19.7143 19.3516C19.7143 18.9788 19.4688 18.846 18.9721 18.6283L18.6998 18.5112C17.9129 18.1763 17.3895 17.7567 17.3895 16.8683C17.3895 16.0513 18.0134 15.4286 18.9866 15.4286C19.6797 15.4286 20.1775 15.6696 20.5368 16.3013L19.6886 16.8471C19.5011 16.5112 19.3002 16.3795 18.9866 16.3795C18.6674 16.3795 18.4654 16.5826 18.4654 16.8471C18.4654 17.1741 18.6674 17.3058 19.135 17.5089L19.4074 17.6261C20.3348 18.0223 20.8571 18.4275 20.8571 19.3382C20.8571 20.3192 20.0859 20.8571 19.0502 20.8571Z",fill:"#6F6E77"})})},ew=function(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.1719 10H20.8281C21.4753 10 22 10.5247 22 11.1719V20.8281C22 21.4753 21.4753 22 20.8281 22H11.1719C10.5247 22 10 21.4753 10 20.8281V11.1719C10 10.5247 10.5247 10 11.1719 10ZM17.4283 20.7223V19.549C17.641 19.7275 17.8721 19.8613 18.1215 19.9505C18.371 20.0397 18.6228 20.0843 18.8771 20.0843C19.0263 20.0843 19.1565 20.0709 19.2678 20.044C19.3791 20.0171 19.472 19.9798 19.5466 19.9322C19.6211 19.8845 19.6768 19.8283 19.7135 19.7635C19.7501 19.6987 19.7685 19.6285 19.7685 19.5527C19.7685 19.45 19.7391 19.3583 19.6805 19.2777C19.6217 19.197 19.5417 19.1225 19.4402 19.054C19.3387 18.9856 19.2183 18.9196 19.0789 18.856C18.9395 18.7925 18.7891 18.7277 18.6277 18.6617C18.2169 18.4906 17.9106 18.2816 17.7089 18.0347C17.5071 17.7878 17.4062 17.4896 17.4062 17.1401C17.4062 16.8663 17.4613 16.631 17.5713 16.4343C17.6814 16.2375 17.8311 16.0756 18.0206 15.9484C18.2102 15.8213 18.4296 15.7278 18.6791 15.668C18.9285 15.6081 19.1926 15.5781 19.4714 15.5781C19.7452 15.5781 19.988 15.5946 20.1995 15.6276C20.411 15.6606 20.606 15.7113 20.7845 15.7798V16.8761C20.6965 16.815 20.6005 16.7612 20.4966 16.7148C20.3927 16.6683 20.2857 16.6298 20.1756 16.5992C20.0656 16.5687 19.9562 16.5461 19.8473 16.5314C19.7385 16.5168 19.6352 16.5094 19.5374 16.5094C19.4029 16.5094 19.2806 16.5223 19.1706 16.5479C19.0605 16.5736 18.9676 16.6097 18.8918 16.6561C18.816 16.7025 18.7573 16.7581 18.7157 16.8229C18.6742 16.8877 18.6534 16.9604 18.6534 17.0411C18.6534 17.1291 18.6766 17.2079 18.7231 17.2776C18.7695 17.3472 18.8356 17.4132 18.9212 17.4756C19.0068 17.5379 19.1107 17.599 19.2329 17.6589C19.3552 17.7188 19.4934 17.7805 19.6474 17.8441C19.8577 17.932 20.0466 18.0255 20.2142 18.1245C20.3817 18.2235 20.5253 18.3354 20.6451 18.46C20.765 18.5847 20.8567 18.7271 20.9203 18.8872C20.9838 19.0473 21.0156 19.2337 21.0156 19.4463C21.0156 19.7397 20.96 19.9859 20.8487 20.1851C20.7375 20.3844 20.5865 20.5457 20.3957 20.6691C20.205 20.7926 19.9831 20.8812 19.73 20.935C19.4769 20.9887 19.2097 21.0156 18.9285 21.0156C18.6399 21.0156 18.3655 20.9912 18.105 20.9423C17.8446 20.8934 17.619 20.8201 17.4283 20.7223ZM16.9609 16.6582H15.4558V20.9453H14.2634V16.6582H12.7656V15.6953H16.9609V16.6582Z",fill:"#6F6E77"})})},eI=function(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.031 11L15.7584 17.8336L16.0831 18.4288L16.4077 17.8336L20.1352 11H22L16.0831 21.4347L10 11H12.031ZM19.2924 11.0006L16.0831 16.8843L12.8737 11.0005L14.2612 11.0001L14.727 11L15.2777 11.9497L16.1319 13.4226L16.9886 11.9512L17.542 11.0006H17.9881H19.2924Z",fill:"#6F6E77"})})};t(69001),eS.Z.registerLanguage("tsx",eg.Z),eS.Z.registerLanguage("markup",eZ.Z),eS.Z.alias("markup","vue");var eN=function(e){var n,t=null===(n=e.fileName.split("."))||void 0===n?void 0:n[1];return function(){switch(t){case"ts":case"tsx":return(0,s.jsx)(ew,{});case"js":case"jsx":return(0,s.jsx)(e_,{});case"vue":return(0,s.jsx)(eI,{});default:return(0,s.jsx)(ek,{})}}()},eE=function(e){var n=e.code,t=e.onCopy,i=(0,u.useState)(!1),r=i[0],o=i[1];(0,u.useEffect)(function(){if(r){var e=setTimeout(function(){o(!1)},1200);return function(){clearTimeout(e)}}},[r]);var a=function(){navigator.clipboard.writeText(n).then(function(){o(!0),void 0!==t&&t()})};return(0,s.jsx)(c.hU,{size:"small",onClick:a,icon:r?"check":"contentCopy"})},eL=function(e){var n=e.fileInfo,t=e.className,i=e.copy,r=e.code,o=e.onCopy,a=/language-(\w+)/.exec(null!=t?t:"");return(0,s.jsxs)("div",{className:"_1ecs97d7vk _1ecs97d7vp _1ecs97d7yu _1ecs97d7x9 _1ecs97d7yg _1ecs97d22k _1ecs97d29x",children:[(0,s.jsxs)("div",{className:"_1ecs97d7vk _1ecs97d7vm _1ecs97d7vs _1ecs97d7w2 _1ecs97d7xz _1ecs97d7y8 _1ecs97d7ym _1ecs97d7yy _1ecs97d18 _1ecs97d8l _1ecs97d320 _1ecs97d39d _1ecs97d89r _1ecs97d89d",children:[void 0!==n?(0,s.jsxs)("div",{className:"_1ecs97d7vk _1ecs97d7vm _1ecs97d7w2 _1ecs97d7vs",children:[(0,s.jsx)(eN,{fileName:n.fileName}),(0,s.jsx)(c.xv,{className:"_8uty130",color:"grey11",children:n.fileName})]}):(0,s.jsx)("span",{}),!0===i?(0,s.jsx)(eE,{onCopy:o,code:String(r)}):null]}),null!==a&&a[1]?(0,s.jsx)(eS.Z,{showLineNumbers:!0,customStyle:{margin:0,border:"none",fontSize:"12px",lineHeight:"18px",borderRadius:"none",backgroundColor:"#FFF",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px"},children:String(r).replace(/\n$/,""),style:eT.MS,language:a[1],PreTag:"div"}):r]})},eM="_1ecs97d88q",eP=t(36065),eD=t(22710),eF=t(22970),eA=t(40147),ez=t(22525);function eO(){return eV.apply(this,arguments)}function eV(){return(eV=(0,eD.Z)(function(){var e;return(0,eF.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,eA.j.project.getSliceMachineConfig()];case 1:return[2,n.sent()];case 2:return e=n.sent(),console.error("Error while trying to get SliceMachine config",e),[2,void 0];case 3:return[2]}})})).apply(this,arguments)}var eR=function(e){var n=(0,eP.p)(),t=(0,ez.QT)(eO,[]);if(!0===e.inline)return(0,s.jsx)("code",(0,S.Z)((0,b.Z)({},e),{className:"_1ecs97d80b _1ecs97d18 _1ecs97d8l _1ecs97d7x9 _1ecs97d89q _1ecs97d8a5"}));var i=function(){var n,t;if((null===(n=e.node)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.meta)!==void 0){var i,r,o,s=null===(i=e.node)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.meta;return{fileName:s.substring(1,s.length-1),language:null===(o=e.className)||void 0===o?void 0:o.split("-")[1]}}return null}(),r=function(){void 0!==n&&void 0!==t&&q.Xe.track({event:"page-type:copy-snippet",framework:n,repository:t.repositoryName})};return(0,s.jsx)(eL,(0,b.Z)((0,S.Z)((0,b.Z)({copy:!0},e),{onCopy:r,code:e.children}),null!==i?{fileInfo:i}:{}))},eH=function(e){var n=e.markdown;return(0,s.jsx)(eb.D,{children:n,linkTarget:"_blank",remarkPlugins:[ej.Z],components:{code:function(e){return(0,s.jsx)(eR,(0,b.Z)({},e))},h1:function(e){return(0,s.jsx)(c.xv,{children:e.children,component:"h1",variant:"h1"})},h2:function(e){return(0,s.jsx)(c.xv,{children:e.children,component:"h2",variant:"h2"})},h3:function(e){return(0,s.jsx)(c.xv,{children:e.children,component:"h3",variant:"h3"})},h4:function(e){return(0,s.jsx)(c.xv,{children:e.children,component:"h4",variant:"h4"})},h5:function(e){return(0,s.jsx)(c.xv,{children:e.children,component:"h4",variant:"h4"})},p:function(e){return(0,s.jsx)(c.xv,{className:eM,children:e.children,component:"p",variant:"normal"})},pre:function(e){return(0,s.jsx)(c.xv,{className:eM,children:e.children,component:"pre",variant:"normal"})}}})};function eB(e){return eU.apply(this,arguments)}function eU(){return(eU=(0,eD.Z)(function(e){var n,t,i,r;return(0,eF.__generator)(this,function(o){switch(o.label){case 0:return n=JSON.parse(e),[4,eA.j.documentation.read({kind:n.kind,data:n.data})];case 1:if(i=(t=o.sent()).errors,r=t.documentation,i.length>0)throw i;return[2,r]}})})).apply(this,arguments)}t(75317);var eX=function(e){var n,t=e.model,i=(0,eP.p)(),r=(0,ez.QT)(eB,[JSON.stringify({kind:"PageSnippet",data:{model:t}})]);if(0===r.length)return null;var o=function(){void 0!==i&&q.Xe.track({event:"page-type:open-snippet",framework:i})};return(0,s.jsxs)(c.Vq,{size:"small",trigger:(0,s.jsx)(c.zx,{variant:"secondary",onClick:o,startIcon:(0,s.jsx)(c.I5,{name:"code"}),children:"Page snippet"}),children:[(0,s.jsx)(c.fK,{icon:"code",title:"Page snippet"}),(0,s.jsx)("section",{className:"_3uvawd0 _1ecs97d7vm _1ecs97d7vv _1ecs97d82p _1ecs97d841",children:r.length>1?(0,s.jsx)(eC,{style:{flex:1},tabs:r.map(function(e,n){var t=e.label,i=e.content;return{label:null!=t?t:"Tab ".concat(n+1),content:(0,s.jsx)(eH,{markdown:i})}})}):(0,s.jsx)(c.xr,{style:{flex:1,padding:16},children:(0,s.jsx)(eH,{markdown:r[0].content})})})]})},eK=function(e){var n=e.model;return(0,s.jsx)("div",{children:(0,s.jsx)(c.SV,{children:(0,s.jsx)(u.Suspense,{fallback:(0,s.jsx)(c.zx,{variant:"secondary",startIcon:(0,s.jsx)(c.I5,{name:"code"}),children:"Page snippet"}),children:(0,s.jsx)(eX,{model:n})})})})},eq=function(){var e=(0,d.useRouter)(),n=(0,m.v9)(function(n){return{selectedCustomType:(0,ep.Jk)(n,(0,ef.Ag)(e.query))}}).selectedCustomType,t=(0,V.Z)().cleanupCustomTypeStore;return((0,u.useEffect)(function(){n&&(0,eu.TG)(n)||e.replace("/")},[n,e]),(0,u.useEffect)(function(){return function(){t()}},[]),n&&(0,eu.TG)(n))?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsxs)("title",{children:[n.local.label," - Slice Machine"]})}),(0,s.jsx)(eW,{customType:n.local,remoteCustomType:(0,eu.wU)(n)?n.remote:void 0})]}):(0,s.jsx)(em.LN,{})},eW=function(e){var n,t=e.customType,i=e.remoteCustomType,r=(0,V.Z)(),o=r.initCustomTypeStore,a=r.saveCustomType;(0,u.useEffect)(function(){o(t,i)},[]);var l=(0,m.v9)(function(e){return{currentCustomType:(0,K.A3)(e),hasPendingModifications:(0,K.CT)(e),isSavingCustomType:(0,ex.hg)(e,eh.z.SAVE_CUSTOM_TYPE)}}),d=l.currentCustomType,p=l.hasPendingModifications,x=l.isSavingCustomType;if(null===d)return(0,s.jsx)(em.LN,{});var h=ef.cd[d.format],v=H.$[d.format];return(0,s.jsxs)(em.LN,{children:[(0,s.jsxs)(em.wd,{children:[(0,s.jsx)(em.Xq,{url:h.tablePagePathname}),(0,s.jsx)(em.Cx,{folder:v.name({start:!0,plural:!0}),page:null!==(n=d.label)&&void 0!==n?n:d.id}),(0,s.jsxs)(em.K2,{children:["page"===d.format?(0,s.jsx)(eK,{model:ed.Dc.fromSM(d)}):void 0,(0,s.jsx)(ev._,{isChangesLocal:!0,format:d.format,customType:ed.Dc.fromSM(d)}),(0,s.jsx)(c.zx,{onClick:a,loading:x,"data-testid":"builder-save-button",disabled:!p||x,children:"Save"})]})]}),(0,s.jsx)(em.RN,{children:(0,s.jsx)(f.xR,{children:(0,s.jsx)(el,{customType:d})})})]})}},69001:function(){},48513:function(){},75317:function(){}}]);