"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const headers = require("next/headers");
const cookie = require('./_node_modules/@prismicio/client/dist/cookie.cjs');
const isPrismicPreviewData = (input) => {
  return typeof input === "object" && input !== null && "ref" in input;
};
const enableAutoPreviews = (config) => {
  if ("previewData" in config && config.previewData) {
    if (isPrismicPreviewData(config.previewData)) {
      config.client.queryContentFromRef(config.previewData.ref);
    }
  } else if ("req" in config && config.req) {
    config.client.enableAutoPreviewsFromReq(config.req);
  } else {
    config.client.queryContentFromRef(() => {
      var _a;
      let isDraftModeEnabled = false;
      try {
        isDraftModeEnabled = headers.draftMode().isEnabled;
      } catch {
        return;
      }
      if (!isDraftModeEnabled) {
        return;
      }
      let cookie$1;
      try {
        cookie$1 = (_a = headers.cookies().get(cookie.preview)) == null ? void 0 : _a.value;
      } catch {
        return;
      }
      if (cookie$1 && /\.prismic\.io/.test(cookie$1)) {
        return cookie$1;
      }
    });
  }
};
exports.enableAutoPreviews = enableAutoPreviews;
//# sourceMappingURL=enableAutoPreviews.cjs.map
