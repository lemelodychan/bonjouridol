"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const navigation = require("next/navigation");
const headers = require("next/headers");
const cookie = require('./_node_modules/@prismicio/client/dist/cookie.cjs');
async function redirectToPreviewURL(config) {
  const basePath = config.basePath || "";
  const request = "request" in config ? config.request : config.req;
  config.client.enableAutoPreviewsFromReq(request);
  const previewUrl = await config.client.resolvePreviewURL({
    linkResolver: config.linkResolver,
    defaultURL: config.defaultURL || "/"
  });
  if ("nextUrl" in request) {
    headers.draftMode().enable();
    const previewCookie = request.nextUrl.searchParams.get("token");
    if (previewCookie) {
      headers.cookies().set(cookie.preview, previewCookie);
    }
    navigation.redirect(basePath + previewUrl);
  } else {
    if (!("res" in config)) {
      throw new Error("[redirectToPreviewURL] The `res` object from the API route must be provided to `redirectToPreviewURL()`.");
    }
    config.res.redirect(basePath + previewUrl);
    return;
  }
}
exports.redirectToPreviewURL = redirectToPreviewURL;
//# sourceMappingURL=redirectToPreviewURL.cjs.map
