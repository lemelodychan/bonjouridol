import * as fs from "node:fs/promises";
import * as path from "node:path";
import { buildCustomTypeDirectoryPath } from "../lib/buildCustomTypeDirectoryPath.js";
import { upsertGlobalContentTypes } from "../lib/upsertGlobalContentTypes.js";
const createModelFile = async ({ dir, data, helpers, options }) => {
  const filePath = path.join(dir, "index.json");
  let contents = JSON.stringify(data.model);
  if (options.format) {
    contents = await helpers.format(contents, filePath);
  }
  await fs.writeFile(filePath, contents);
};
const customTypeCreate = async (data, context) => {
  const dir = buildCustomTypeDirectoryPath({
    customTypeID: data.model.id,
    helpers: context.helpers
  });
  await fs.mkdir(dir, { recursive: true });
  await createModelFile({ dir, data, ...context });
  await upsertGlobalContentTypes(context);
};
export {
  customTypeCreate
};
//# sourceMappingURL=customType-create.js.map
