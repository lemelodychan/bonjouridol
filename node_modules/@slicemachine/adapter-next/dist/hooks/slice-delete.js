import * as fs from "node:fs/promises";
import { buildSliceDirectoryPath } from "../lib/buildSliceDirectoryPath.js";
import { rejectIfNecessary } from "../lib/rejectIfNecessary.js";
import { upsertGlobalContentTypes } from "../lib/upsertGlobalContentTypes.js";
import { upsertSliceLibraryIndexFile } from "../lib/upsertSliceLibraryIndexFile.js";
const deleteSliceDir = async ({ data, helpers }) => {
  const dir = buildSliceDirectoryPath({
    libraryID: data.libraryID,
    model: data.model,
    helpers
  });
  await fs.rm(dir, { recursive: true });
};
const sliceDelete = async (data, context) => {
  await deleteSliceDir({ data, ...context });
  rejectIfNecessary(await Promise.allSettled([
    upsertGlobalContentTypes(context),
    upsertSliceLibraryIndexFile({ libraryID: data.libraryID, ...context })
  ]));
};
export {
  sliceDelete
};
//# sourceMappingURL=slice-delete.js.map
